{"version":3,"sources":["services/persons.js","components/Filter.js","components/PersonForm.js","components/Person.js","components/PersonList.js","components/Notification.js","App.js","index.js"],"names":["baseURL","services_persons","axios","get","then","response","data","newPerson","post","id","put","concat","delete","status","Filter","_ref","filter","handleFilterChange","react_default","a","createElement","value","onChange","PersonForm","props","newName","handleNameChange","newNumber","handleNumberChange","type","onClick","handleClick","Person","name","number","PersonList","persons","personList","person","toLowerCase","includes","map","components_Person","key","Notification","message","content","success","className","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","setFilter","_useState9","_useState10","setMessage","useEffect","personService","initialPersons","successTimeout","seconds","setTimeout","errorTimeout","components_Notification","components_Filter","event","target","components_PersonForm","preventDefault","existingPerson","find","msg","window","confirm","changedPerson","objectSpread","returnedPerson","catch","error","updatePerson","components_PersonList","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.c5f3707b.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst baseURL = `/api/persons`;\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseURL).then(response => response.data);\r\n};\r\n\r\nconst create = newPerson => {\r\n  return axios.post(baseURL, newPerson).then(response => response.data);\r\n};\r\n\r\nconst update = (id, newPerson) => {\r\n  return axios\r\n    .put(`${baseURL}/${id}`, newPerson)\r\n    .then(response => response.data);\r\n};\r\n\r\nconst deletePerson = id => {\r\n  return axios.delete(`${baseURL}/${id}`).then(response => response.status);\r\n};\r\n\r\nexport default { getAll, create, update, deletePerson };\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ filter, handleFilterChange }) => {\r\n  return (\r\n    <div>\r\n      filter shown with <input value={filter} onChange={handleFilterChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = props => {\r\n  return (\r\n    <form>\r\n      <div>\r\n        name: <input value={props.newName} onChange={props.handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number:{\" \"}\r\n        <input value={props.newNumber} onChange={props.handleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\" onClick={props.handleClick}>\r\n          add\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Person = ({ name, number, id, handleClick }) => {\r\n  return (\r\n    <div>\r\n      {name} {number} <button onClick={() => handleClick(id)}>Delete</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Person;\r\n","import React from \"react\";\r\n\r\nimport Person from \"./Person\";\r\n\r\nconst PersonList = ({ persons, filter, handleClick }) => {\r\n  const personList = persons\r\n    .filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\r\n    .map(person => (\r\n      <Person\r\n        key={person.id}\r\n        name={person.name}\r\n        number={person.number}\r\n        id={person.id}\r\n        handleClick={handleClick}\r\n      />\r\n    ));\r\n\r\n  return <div>{personList}</div>;\r\n};\r\n\r\nexport default PersonList;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message }) => {\r\n  if (message.content === null) {\r\n    return null;\r\n  }\r\n\r\n  if (message.success) {\r\n    return <div className=\"success\">{message.content}</div>;\r\n  }\r\n\r\n  return <div className=\"error\">{message.content}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nimport personService from \"./services/persons\";\r\n\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport PersonList from \"./components/PersonList\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nimport \"./index.css\";\r\n\r\nconst App = () => {\r\n  /* STATE MANAGEMENT */\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [filter, setFilter] = useState(\"\");\r\n  const [message, setMessage] = useState({ content: null, success: false });\r\n\r\n  /* MOUNTING */\r\n  useEffect(() => {\r\n    personService.getAll().then(initialPersons => {\r\n      setPersons(initialPersons);\r\n    });\r\n  }, []);\r\n\r\n  /*  MESSAGE UTILITIES */\r\n  const successTimeout = (message, seconds) => {\r\n    setMessage({ content: message, success: true });\r\n    setTimeout(() => {\r\n      setMessage({ content: null, success: false });\r\n    }, seconds * 1000);\r\n  };\r\n\r\n  const errorTimeout = (message, seconds) => {\r\n    setMessage({ content: message, success: false });\r\n    setTimeout(() => {\r\n      setMessage({ content: null, success: false });\r\n    }, seconds * 1000);\r\n  };\r\n\r\n  /* FORM HANDLING */\r\n  const handleFilterChange = event => {\r\n    setFilter(event.target.value);\r\n  };\r\n\r\n  const handleNameChange = event => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = event => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  /* CREATE AND UPDATE */\r\n  const updatePerson = existingPerson => {\r\n    const changedPerson = { ...existingPerson, number: newNumber };\r\n    personService\r\n      .update(changedPerson.id, changedPerson)\r\n      .then(returnedPerson => {\r\n        setPersons(\r\n          persons.map(person =>\r\n            person.id !== returnedPerson.id ? person : returnedPerson\r\n          )\r\n        );\r\n        successTimeout(`Updated ${returnedPerson.name}`, 5);\r\n        setNewName(\"\");\r\n        setNewNumber(\"\");\r\n      })\r\n      .catch(error => {\r\n        errorTimeout(\r\n          `Information on ${\r\n            changedPerson.name\r\n          } has already been removed from server`,\r\n          5\r\n        );\r\n        setPersons(persons.filter(person => person.id !== changedPerson.id));\r\n      });\r\n  };\r\n\r\n  const handleAddClick = event => {\r\n    event.preventDefault();\r\n    const existingPerson = persons.find(person => person.name === newName);\r\n    if (existingPerson) {\r\n      const msg = `${\r\n        existingPerson.name\r\n      } is already added to the phonebook, replace the old number with a new one?`;\r\n\r\n      if (window.confirm(msg)) {\r\n        updatePerson(existingPerson);\r\n      }\r\n      return;\r\n    }\r\n\r\n    const newPerson = {\r\n      name: newName,\r\n      number: newNumber\r\n    };\r\n\r\n    personService\r\n      .create(newPerson)\r\n      .then(returnedPerson => {\r\n        setPersons(persons.concat(returnedPerson));\r\n        successTimeout(`Created ${returnedPerson.name}`, 5);\r\n        setNewName(\"\");\r\n        setNewNumber(\"\");\r\n      })\r\n      .catch(error => {\r\n        errorTimeout(error.response.data.error, 10);\r\n      });\r\n  };\r\n\r\n  /* DELETE */\r\n  const handleDeleteClick = id => {\r\n    const existingPerson = persons.find(person => person.id === id);\r\n\r\n    if (window.confirm(`Delete ${existingPerson.name} with id ${id}?`)) {\r\n      personService\r\n        .deletePerson(id)\r\n        .then(status => {\r\n          setPersons(persons.filter(person => person.id !== id));\r\n          successTimeout(`Deleted ${existingPerson.name}`, 5);\r\n        })\r\n        .catch(error => {\r\n          errorTimeout(\r\n            `Information on ${\r\n              existingPerson.name\r\n            } has already been removed from server`,\r\n            5\r\n          );\r\n          setPersons(persons.filter(person => person.id !== id));\r\n        });\r\n    }\r\n  };\r\n\r\n  /* RENDER */\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} />\r\n      <Filter filter={filter} handleFilterChange={handleFilterChange} />\r\n      <h2>Add new</h2>\r\n      <PersonForm\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        handleNameChange={handleNameChange}\r\n        handleNumberChange={handleNumberChange}\r\n        handleClick={handleAddClick}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <PersonList\r\n        persons={persons}\r\n        filter={filter}\r\n        handleClick={handleDeleteClick}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}